{"ast":null,"code":"import React from'react';import UseFetch from'../hooks/UseFetch';import{useParams}from'react-router-dom';import UserForm from'../components/users/UserForm';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditUser=function EditUser(){var userInitialData;var userData={};var navigate=useNavigate();var _useParams=useParams(),uid=_useParams.uid;var deleteUser=function deleteUser(id){console.log(id);var user={id:id};var BASE_URL='/users/delete-user';fetch(BASE_URL,{method:'DELETE',body:JSON.stringify(user),headers:{'Content-Type':'application/json'}}).then(function(){navigate('/');});};var editUser=function editUser(userdata){userData.id=uid;var BASE_URL='/users/edit-user';fetch(BASE_URL,{method:'POST',body:JSON.stringify(userdata),headers:{'Content-Type':'application/json'}}).then(function(){navigate('/');});};var _UseFetch=UseFetch(),loading=_UseFetch.loading,users=_UseFetch.users;if(loading){return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}if(users){users.map(function(u){if(u.id==uid){return userInitialData=u;}});}if(!userInitialData){console.log(users);return/*#__PURE__*/_jsx(\"div\",{children:\"Loading user Data\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:'#35586C'},children:\"Edit User\"}),/*#__PURE__*/_jsx(UserForm,{userInitialData:userInitialData,onSubmitUser:editUser,butttoTitle:\"Save\",onDeleteUser:deleteUser,fname:userInitialData.first_name,lname:userInitialData.last_name})]});};export default EditUser;","map":{"version":3,"sources":["D:/ba-link-home-task/frontend/usermanager/src/pages/EditUser.js"],"names":["React","UseFetch","useParams","UserForm","useNavigate","EditUser","userInitialData","userData","navigate","uid","deleteUser","id","console","log","user","BASE_URL","fetch","method","body","JSON","stringify","headers","then","editUser","userdata","loading","users","map","u","color","first_name","last_name"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,mBAArB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,8BAArB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,6IAGA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAEnB,GAAIC,CAAAA,eAAJ,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,eAAgBF,SAAS,EAAzB,CAAQO,GAAR,YAAQA,GAAR,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,EAAD,CAAQ,CAEvBC,OAAO,CAACC,GAAR,CAAYF,EAAZ,EACA,GAAIG,CAAAA,IAAI,CAAG,CACPH,EAAE,CAAEA,EADG,CAAX,CAGA,GAAMI,CAAAA,QAAQ,CAAG,oBAAjB,CAGAC,KAAK,CAACD,QAAD,CAAW,CACZE,MAAM,CAAE,QADI,CAEZC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAFM,CAGZO,OAAO,CAAE,CACL,eAAgB,kBADX,CAHG,CAAX,CAAL,CAMGC,IANH,CAMQ,UAAM,CACVd,QAAQ,CAAC,GAAD,CAAR,CACH,CARD,EAUH,CAnBD,CAuBA,GAAMe,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAc,CAE3BjB,QAAQ,CAACI,EAAT,CAAcF,GAAd,CACA,GAAMM,CAAAA,QAAQ,CAAG,kBAAjB,CAGAC,KAAK,CAACD,QAAD,CAAW,CACZE,MAAM,CAAE,MADI,CAEZC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeI,QAAf,CAFM,CAGZH,OAAO,CAAE,CACL,eAAgB,kBADX,CAHG,CAAX,CAAL,CAMGC,IANH,CAMQ,UAAM,CACVd,QAAQ,CAAC,GAAD,CAAR,CACH,CARD,EAUH,CAhBD,CAkBA,cAA2BP,QAAQ,EAAnC,CAAQwB,OAAR,WAAQA,OAAR,CAAiBC,KAAjB,WAAiBA,KAAjB,CAGA,GAAID,OAAJ,CAAa,CACT,mBAAO,sCACH,iCADG,EAAP,CAGH,CAKD,GAAIC,KAAJ,CAAW,CACPA,KAAK,CAACC,GAAN,CAAU,SAACC,CAAD,CAAO,CAEb,GAAIA,CAAC,CAACjB,EAAF,EAAQF,GAAZ,CAAiB,CAEb,MAAOH,CAAAA,eAAe,CAAGsB,CAAzB,CACH,CACJ,CAND,EAOH,CAED,GAAI,CAACtB,eAAL,CAAsB,CAClBM,OAAO,CAACC,GAAR,CAAYa,KAAZ,EACA,mBAAO,0CAAP,CACH,CAED,mBACI,wCACK,WAAI,KAAK,CAAE,CAACG,KAAK,CAAC,SAAP,CAAX,uBADL,cAKI,KAAC,QAAD,EAAU,eAAe,CAAEvB,eAA3B,CACI,YAAY,CAAEiB,QADlB,CAEI,WAAW,CAAC,MAFhB,CAGI,YAAY,CAAEb,UAHlB,CAII,KAAK,CAAEJ,eAAe,CAACwB,UAJ3B,CAKI,KAAK,CAAExB,eAAe,CAACyB,SAL3B,EALJ,GADJ,CAoBH,CAlGD,CAoGA,cAAe1B,CAAAA,QAAf","sourcesContent":["import React from 'react'\r\nimport UseFetch from '../hooks/UseFetch';\r\nimport { useParams } from 'react-router-dom';\r\nimport UserForm from '../components/users/UserForm';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst EditUser = () => {\r\n \r\n    var userInitialData;\r\n    var userData = {};\r\n    const navigate = useNavigate();\r\n    const { uid } = useParams();\r\n\r\n\r\n\r\n\r\n    const deleteUser = (id) => {\r\n\r\n        console.log(id)\r\n        let user = {\r\n            id: id\r\n        }\r\n        const BASE_URL = '/users/delete-user';\r\n\r\n\r\n        fetch(BASE_URL, {\r\n            method: 'DELETE',\r\n            body: JSON.stringify(user),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(() => {\r\n            navigate('/')\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    const editUser = (userdata) => {\r\n\r\n        userData.id = uid;\r\n        const BASE_URL = '/users/edit-user';\r\n\r\n\r\n        fetch(BASE_URL, {\r\n            method: 'POST',\r\n            body: JSON.stringify(userdata),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(() => {\r\n            navigate('/')\r\n        })\r\n\r\n    }\r\n\r\n    const { loading, users } = UseFetch();\r\n\r\n\r\n    if (loading) {\r\n        return <section>\r\n            <p>Loading...</p>\r\n        </section>\r\n    }\r\n\r\n\r\n\r\n\r\n    if (users) {\r\n        users.map((u) => {\r\n\r\n            if (u.id == uid) {\r\n\r\n                return userInitialData = u;\r\n            }\r\n        })\r\n    }\r\n\r\n    if (!userInitialData) {\r\n        console.log(users)\r\n        return <div>Loading user Data</div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n             <h1 style={{color:'#35586C'}}>Edit User</h1>  \r\n\r\n\r\n\r\n            <UserForm userInitialData={userInitialData}\r\n                onSubmitUser={editUser}\r\n                butttoTitle=\"Save\"\r\n                onDeleteUser={deleteUser}\r\n                fname={userInitialData.first_name}\r\n                lname={userInitialData.last_name}\r\n            />\r\n        </>\r\n    )\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default EditUser\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}